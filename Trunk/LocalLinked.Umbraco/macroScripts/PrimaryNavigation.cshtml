@inherits umbraco.MacroEngines.DynamicNodeContext

<div id="primaryNavigation">
@{
  var level = 1;
  var parent = @Model.AncestorOrSelf(level);
  if (parent != null) {
    <ul>
    @foreach (var item in parent.Children.Where("Visible")) {
      var selected = Array.IndexOf(Model.Path.Split(','), item.Id.ToString()) >= 0 ? " class=\"selected\"" : "";
      <li@Html.Raw(selected)>
        <a href="@item.Url">@item.Name</a>
      </li>
      }
    </ul>
  }
}
</div>              